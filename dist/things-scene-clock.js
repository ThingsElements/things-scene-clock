!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@hatiolab/things-scene"),require("moment")):"function"==typeof define&&define.amd?define(["exports","@hatiolab/things-scene","moment"],t):t((e=e||self)["things-scene-clock"]={},e.scene,e.moment)}(this,function(e,t,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;const r={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"hour-width",name:"hourWidth",property:"hourWidth"},{type:"number",label:"minute-width",name:"minuteWidth",property:"minuteWidth"},{type:"number",label:"second-width",name:"secondWidth",property:"secondWidth"},{type:"checkbox",label:"needle-round",name:"needleRound",property:"needleRound"},{type:"checkbox",label:"show-second",name:"showSecond",property:"showSecond"},{type:"checkbox",label:"show-number",name:"showNumber",property:"showNumber"},{type:"number",label:"inner-circle-size",name:"innerCircleSize",property:"innerCircleSize"},{type:"color",label:"inner-circle-color",name:"innerCircleColor",property:"innerCircleColor"}]};function i(e,t,n,r,i){e.beginPath(),e.lineWidth=r,e.lineCap=i?"round":"square",e.moveTo(0,0),e.rotate(t),e.lineTo(0,-n),e.stroke(),e.rotate(-t)}class o extends t.Ellipse{_draw(e){var t,n,{cx:r,cy:o,rx:l,ry:a,fillStyle:s,strokeStyle:c,fontColor:h="#000",lineWidth:m,hourWidth:d,minuteWidth:u,secondWidth:p,needleRound:b=!1,showSecond:y=!0,showNumber:f=!0,innerCircleSize:g=5,innerCircleColor:x="#000"}=this.model;if(e.beginPath(),e.ellipse(r,o,Math.abs(l),Math.abs(a),0,0,2*Math.PI),e.fillStyle=s,e.strokeStyle=c,e.lineWidth=m||.1*l,this.drawFill(e),this.drawStroke(e),e.beginPath(),e.translate(r,o),e.scale(1,a/l),f)for(e.font=.15*l+"px arial",e.textBaseline="middle",e.textAlign="center",e.fillStyle=h,n=1;n<13;n++)t=n*Math.PI/6,e.rotate(t),e.translate(0,.85*-l),e.rotate(-t),e.fillText(n.toString(),0,0),e.rotate(t),e.translate(0,.85*l),e.rotate(-t);var w,S=new Date,P=S.getHours(),C=S.getMinutes(),M=S.getSeconds();i(e,P=(P%=12)*Math.PI/6+C*Math.PI/360+M*Math.PI/21600,.55*l,d||.07*l,b),i(e,C=C*Math.PI/30+M*Math.PI/1800,.8*l,u||.07*l,b),y&&i(e,M=M*Math.PI/30,.9*l,p||.02*l,b),e.beginPath(),g&&(e.ellipse(0,0,g,g,0,0,2*Math.PI),e.fillStyle=x,e.fill()),e.beginPath(),e.scale(1,l/a),e.translate(-r,-o),w=setTimeout(function(e){e.invalidate(),clearTimeout(w)},1e3,this)}get nature(){return r}}t.Component.register("clock-analog",o);const l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"time-format",name:"timeFormat"},{type:"checkbox",label:"is-local-time",name:"localTime"},{type:"number",label:"utc",name:"utc"}]};class a extends t.Text{get nature(){return l}_draw(e){setTimeout(this._timer.bind(this),1e3)}_timer(){this.set({text:this._getTimeStamp()})}_getTimeStamp(){var e=n(),t=this.get("utc"),r=this.get("timeFormat")||"YYYY-MM-DD HH:mm:ss";return this.get("localTime")?e.local():e.utc().utcOffset(t),e.format(r)}}t.Component.register("clock-text",a),e.ClockAnalog=o,e.ClockText=a,Object.defineProperty(e,"__esModule",{value:!0})});
