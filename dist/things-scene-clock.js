!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@hatiolab/things-scene"),require("moment")):"function"==typeof define&&define.amd?define(["exports","@hatiolab/things-scene","moment"],t):t((e=e||self)["things-scene-clock"]={},e.scene,e.moment)}(this,function(e,t,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;const l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"hour-width",name:"hourWidth",property:"hourWidth"},{type:"number",label:"minute-width",name:"minuteWidth",property:"minuteWidth"},{type:"number",label:"second-width",name:"secondWidth",property:"secondWidth"},{type:"checkbox",label:"needle-round",name:"needleRound",property:"needleRound"},{type:"checkbox",label:"show-second",name:"showSecond",property:"showSecond"},{type:"checkbox",label:"show-number",name:"showNumber",property:"showNumber"},{type:"number",label:"inner-circle-size",name:"innerCircleSize",property:"innerCircleSize"},{type:"color",label:"inner-circle-color",name:"innerCircleColor",property:"innerCircleColor"}]};function a(e,t,n,l,a){e.beginPath(),e.lineWidth=l,e.lineCap=a?"round":"square",e.moveTo(0,0),e.rotate(t),e.lineTo(0,-n),e.stroke(),e.rotate(-t)}class i extends t.Ellipse{_draw(e){var t,n,{cx:l,cy:i,rx:r,ry:o,fillStyle:s,strokeStyle:c,fontColor:h="#000",lineWidth:u,hourWidth:m,minuteWidth:d,secondWidth:p,needleRound:b=!1,showSecond:y=!0,showNumber:g=!0,innerCircleSize:f=5,innerCircleColor:w="#000"}=this.model;if(e.beginPath(),e.ellipse(l,i,Math.abs(r),Math.abs(o),0,0,2*Math.PI),e.fillStyle=s,e.strokeStyle=c,e.lineWidth=u||.1*r,this.drawFill(e),this.drawStroke(e),e.beginPath(),e.translate(l,i),e.scale(1,o/r),g)for(e.font=.15*r+"px arial",e.textBaseline="middle",e.textAlign="center",e.fillStyle=h,n=1;n<13;n++)t=n*Math.PI/6,e.rotate(t),e.translate(0,.85*-r),e.rotate(-t),e.fillText(n.toString(),0,0),e.rotate(t),e.translate(0,.85*r),e.rotate(-t);var x,k=new Date,S=k.getHours(),C=k.getMinutes(),P=k.getSeconds();a(e,S=(S%=12)*Math.PI/6+C*Math.PI/360+P*Math.PI/21600,.55*r,m||.07*r,b),a(e,C=C*Math.PI/30+P*Math.PI/1800,.8*r,d||.07*r,b),y&&a(e,P=P*Math.PI/30,.9*r,p||.02*r,b),e.beginPath(),f&&(e.ellipse(0,0,f,f,0,0,2*Math.PI),e.fillStyle=w,e.fill()),e.beginPath(),e.scale(1,r/o),e.translate(-l,-i),x=setTimeout(function(e){e.invalidate(),clearTimeout(x)},1e3,this)}get nature(){return l}}t.Component.register("clock-analog",i);const r={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"time-format",name:"timeFormat"},{type:"checkbox",label:"is-local-time",name:"localTime"},{type:"number",label:"utc",name:"utc"},{type:"select",label:"week-language",name:"weekLanguage",property:{options:[{display:"English",value:"en"},{display:"Korean",value:"ko"},{display:"Chinese",value:"zh_cn"},{display:"Japanese",value:"ja"}]}}]};class o extends t.Text{get nature(){return r}_draw(e){setTimeout(this._timer.bind(this),1e3)}_timer(){this.set({text:this._getTimeStamp()})}_getTimeStamp(){var e=n(),t=this.get("utc"),l=this.get("timeFormat")||"YYYY-MM-DD HH:mm:ss",a=this.get("weekLanguage");return this.get("weekLanguage")||(a="en"),this.get("localTime")?e.local():e.utc().utcOffset(t),e.locale(a).format(l)}}t.Component.register("clock-text",o),e.ClockAnalog=i,e.ClockText=o,Object.defineProperty(e,"__esModule",{value:!0})});
